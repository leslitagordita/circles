<!--                                                                                                                       
     #####    ##         ###   ###                       ##### ##                                          ##     ###    
  ######  /  #### /       ###   ###                   ######  /### /         #                              ##     ###   
 /#   /  /   ####/         ##    ##                  /#   /  /  ##/         ###                             ##      ##   
/    /  /    # #           ##    ##                 /    /  /    #           #                              ##      ##   
    /  /     #             ##    ##                     /  /                                                ##      ##   
   ## ##     #      /##    ##    ##      /###          ## ##   ###  /###   ###       /##  ###  /###     ### ##      ##   
   ## ##     #     / ###   ##    ##     / ###  /       ## ##    ###/ #### / ###     / ###  ###/ #### / #########    ##   
   ## ########    /   ###  ##    ##    /   ###/        ## ###### ##   ###/   ##    /   ###  ##   ###/ ##   ####     ##   
   ## ##     #   ##    ### ##    ##   ##    ##         ## #####  ##          ##   ##    ### ##    ##  ##    ##      ##   
   ## ##     ##  ########  ##    ##   ##    ##         ## ##     ##          ##   ########  ##    ##  ##    ##      ### /
   #  ##     ##  #######   ##    ##   ##    ##         #  ##     ##          ##   #######   ##    ##  ##    ##       ##/ 
      /       ## ##        ##    ##   ##    ##            #      ##          ##   ##        ##    ##  ##    ##           
  /##/        ## ####    / ##    ##   ##    ##        /####      ##          ##   ####    / ##    ##  ##    /#       #   
 /  #####      ## ######/  ### / ### / ######        /  #####    ###         ### / ######/  ###   ###  ####/        ###  
/     ##           #####    ##/   ##/   ####        /    ###      ###         ##/   #####    ###   ###  ###          #   
#                                                   #                                                                    
 ##                                                  ##                                                                  
 --> 

<!DOCTYPE html>                                                                                                                       
<html>

  <head>
    <meta charset="utf-8">
    <script src="js/jquery-1.11.1.js"></script>
    <script src="js/fabric.js-1.5.0/dist/fabric.js"></script>
  </head>

  <body>
    <div id = "container">
        <canvas id="canvas" width="" height="" style="border:1px solid #ccc"></canvas>
    </div>
 
  </body>

    <script>
    $(function () {
        //window Height and Width
        var windowHeight = window.innerHeight;    
        var windowWidth = window.innerWidth;

        var randCanRGBa = fabric.util.getRandomInt(130,190);
        var randCanRGBb = fabric.util.getRandomInt(130,190);
        var randCanRGBc = fabric.util.getRandomInt(130,190);

        var canvas = new fabric.Canvas('canvas',
            {
              backgroundColor: 'rgb('+randCanRGBa+','+randCanRGBb+','+randCanRGBc+')'
            });

        //set canvas dimensions based on window dimensions
        canvas.setHeight(windowHeight);
        canvas.setWidth(windowWidth);

        //canvas dimensions
        var canHeight = canvas.getHeight();
        var canWidth = canvas.getWidth();

        //calculate dimensions for each square based on 4x4 grid
        var squareWidth = canWidth / 4;
        var squareHeight = canHeight /4;

        //circle class
        var mCirc = fabric.util.createClass(fabric.Circle, {
          initialize: function(options, radiusFraction, topC, leftC, fillC){
            this.callSuper('initialize');
            this.radiusFraction = radiusFraction;
            this.topC = topC;
            this.leftC = leftC;
            //this.radius = squareHeight / radiusFraction;
            //this.top = (top - (this.radius*2))/2;
            //this.left = (left - (this.radius*2))/2;
            this.fillC = fillC;
          },
          toString: function(){
            return this.fill;
          }
        });//end circle class

        //will draw rectangles for grid
        var drawRectangles = function(startWidth, startHeight){
           
            var squareX = 0;
            var squareY = 0;

            

            var i;
            var j;
            for(j = 0; j <= 4; j++){

                 for(i = 0; i <= 4; i++){
                    
                    console.log("width "+squareX);
                    console.log("height "+squareY);

                    var rect_i= new fabric.Rect({
                        top : squareY ,
                        left : squareX,
                        width : startWidth,
                        height : startHeight,
                        fill : 'rgb(150,150,150)',
                        hasControls: false,
                        hasBorders: false,
                        selectable: false,
                    })
                    squareX = squareX + startWidth;
                    //squareY = squareY + squareHeight;
                    //canvas.add(rect_i);
                       //random number generated for circle's radius
                var randRadius = fabric.util.getRandomInt(3,15);
                var randRGBa = fabric.util.getRandomInt(0,255);
                var randRGBb = fabric.util.getRandomInt(0,255);
                var randRGBc = fabric.util.getRandomInt(0,255);

                var randTop = fabric.util.getRandomInt(20, (canHeight-40));
                var randLeft = fabric.util.getRandomInt(20, (canWidth-40));

                var circ_i = new fabric.Circle({
                      radius: startWidth/randRadius,
                      top: randTop,
                      left: randLeft,
                      fill: 'rgb('+randRGBa+','+randRGBb+','+randRGBc+')'
                    })

                console.log("circle left 1 " + circ_i.getLeft()); 
                console.log("CANVAS WIDTH " + canvas.getWidth());
                console.log("CALC!! " + (circ_i.getWidth()+circ_i.getLeft()));
                var circLocationX = circ_i.getWidth() + circ_i.getLeft(); 

                if(circLocationX >= canWidth){
                  circ_i.setLeft(circ_i.getLeft()-circ_i.getWidth());
                  console.log("circle left 2" + circ_i.getLeft());
                }//end if

                if((circ_i.getHeight() + circ_i.getTop()) >= canvas.getHeight()){
                  circ_i.setTop(circ_i.getTop()-(circ_i.getRadiusY()-1000));
                }//end if
                canvas.add(circ_i);
                //end circle stuff

                 }//end i for loop

                 squareY = squareY + startHeight;
                 squareX = 0;
                 console.log("j loop "+squareY);
                 //end j loop stuff

             
                console.log('Radius'+circ_i.getRadiusX + 'top'+ circ_i.getTop)
             }//end j for loop

        }//end drawRectangles

              var poly = new fabric.Polyline([
            { x: 10, y: 10 },
            { x: 50, y: 30 },
            { x: 40, y: 70 },
            
          ], {
          fill:'rgb(150,150,150)',
          stroke: 'red',
          left: 100,
          top: 100
        });
        var path = new fabric.Path('M 0 0 L 150 600 L 170 200 z');
        path.set({ left: 50, top: 120 });
        path.path
        //canvas.add(path);

        var testP = new fabric.Path('M 0 0 L 50 50 z');
        testP.set({ left: 10, top: 10 });
        testP.set({ fill: 'red', stroke: 'black'});
        //canvas.add(testP);

        var circ = new fabric.Circle({
          radius: squareWidth /9, fill: 'blue', left: 350, top:10
        })

        
              

        drawRectangles(squareWidth, squareHeight);
        var testClass = new mCirc(100, 500, 500, 'red');
        //canvas.add(testClass);
        
        //add all objects to canvas
        canvas.add(poly);
        canvas.add(testP);
        //canvas.add(circ);
        canvas.add(testClass);
        //canvas.add(path);
        //canvas.renderAll.bind(canvas);

        console.log(squareWidth);
        console.log(Math.E);

        //var dLd = document.location.reload(true);
      
       //setInterval(dLd, 7000);

        



    });

    </script>
  

</html>